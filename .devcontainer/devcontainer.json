// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/ubuntu
{
	"name": "Ubuntu",
	// Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile
	"image": "mcr.microsoft.com/devcontainers/base:jammy",
	// Features to add to the dev container. More info: https://containers.dev/features.
	"features": {
		"ghcr.io/devcontainers/features/powershell:1": {
			"version": "latest"
		},
		"ghcr.io/devcontainers/features/python:1": {
			"installTools": true,
			"version": "os-provided"
		},
		"ghcr.io/devcontainers-contrib/features/poetry:2": {
			"version": "latest"
		},
		"ghcr.io/devcontainers/features/go:1": {
			"version": "latest"
		},
		"ghcr.io/devcontainers/features/terraform:1": {
			"version": "latest",
			"tflint": "latest",
			"terragrunt": "latest"
		},
		"ghcr.io/natescherer/devcontainers-custom-features/powershell-resources:1": {
			"resources": "powershell-yaml,invoke-atomicredteam"
		},
		"ghcr.io/devcontainers-contrib/features/apt-packages:1": {
			"clean_ppas": true,
			"preserve_apt_list": true,
			"packages": "build-essential,gnupg,ca-certificates,apt-transport-https,software-properties-common,wget,at,ccrypt,clang,cron,curl,ed,golang,iproute2,iputils-ping,kmod,libpam0g-dev,less,lsof,netcat,net-tools,nmap,p7zip,python2,rsync,samba,selinux-utils,ssh,sshpass,sudo,tcpdump,telnet,tor,ufw,vim,whois,zip",
			"ppas": "ppa:deadsnakes/ppa"
		}		
	},

	// Use 'postCreateCommand' to run commands after the container is created.
	"postCreateCommand": "sudo pwsh ./.devcontainer/build.ps1",

	// Configure tool-specific properties.
	// "customizations": {},

	// Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
	"remoteUser": "root"
}
